<div class="card">
    <div class="card-body">
        {% for semParc in parcours.semestreParcours|filter(semestre => semestre.semestre.nonDispense == false) %}
            {% if semParc.semestre.semestreRaccroche != null %}
                {% set semestre = semParc.semestre.semestreRaccroche %}
                {% else %}
                {% set semestre = semParc %}
            {% endif %}
            <h2>{{ semParc.display }}</h2>
            <table class="table table-bordered">
                <thead>
                <tr>
                    <th colspan="2" rowspan="2">&nbsp;</th>
                    {% for ue in semestre.semestre.ues %}
                        <th colspan="{{ ue.elementConstitutifs|length }}" class="text-center">{{ ue.display(parcours) }}</th>
                    {% endfor %}
                </tr>
                <tr>
                    {% for ue in semestre.semestre.ues %}
                        {% for ec in ue.elementConstitutifs %}
                            <th class="text-center">{{ ec.code }}</th>
                        {% endfor %}
                    {% endfor %}
                </tr>
                </thead>
                <tbody>
                {% for bcc in parcours.blocCompetences %}
                    {% for competence in bcc.competences %}
                        <tr>
                            {% if loop.first %}
                                <td rowspan="{{ bcc.competences|length }}">{{ bcc.display }}</td>
                            {% endif %}
                            <td>{{ competence.display }}</td>
                            {% for ue in semestre.semestre.ues %}
                                {% for ec in ue.elementConstitutifs %}
                                    <td class="text-center">
                                        {% if ec.isFicheFromParcours %}
                                            {% if competence.ficheMatieress.contains(ec.ficheMatiere) %}
{#                                                <i class="fa fa-check"></i>#}
                                                X
                                            {% endif %}
                                        {% else %}
                                            {% if competence.elementConstitutifs.contains(ec) %}
{#                                                <i class="fa fa-check"></i>#}
                                                X
                                            {% endif %}
                                        {% endif %}
                                    </td>
                                {% endfor %}
                            {% endfor %}
                        </tr>
                    {% endfor %}
                {% endfor %}
                </tbody>
            </table>
        {% endfor %}
    </div>
</div>
