{# templates/components/_notif_toggles.html.twig #}
{% set ch = channels %}
<label class="flex items-center gap-1 text-sm">
    <input type="checkbox" {{ ch.email ? 'checked' }} data-model="email">
    Email
</label>
<label class="flex items-center gap-1 text-sm">
    <input type="checkbox" {{ ch.inapp ? 'checked' }} data-model="inapp">
    In-app
</label>

<button class="px-3 py-1.5 text-sm rounded bg-blue-600 text-white"
        data-action="live#action"
        data-live-action-param="save"
        data-live-args='{
    "workflow":"{{ scope.workflow }}",
    "place":{{ scope.place is not null ? '"'~scope.place~'"' : 'null' }},
    "transition":{{ scope.transition is not null ? '"'~scope.transition~'"' : 'null' }},
    "email": (this.closest("div").querySelector("[data-model=email]")).checked,
    "inapp": (this.closest("div").querySelector("[data-model=inapp]")).checked
  }'>Enregistrer
</button>

{% if not inherited %}
    <button class="px-3 py-1.5 text-sm rounded bg-gray-200"
            data-action="live#action"
            data-live-action-param="remove"
            data-live-args='{
      "workflow":"{{ scope.workflow }}",
      "place":{{ scope.place is not null ? '"'~scope.place~'"' : 'null' }},
      "transition":{{ scope.transition is not null ? '"'~scope.transition~'"' : 'null' }}
    }'>Revenir à l’héritage
    </button>
{% endif %}
