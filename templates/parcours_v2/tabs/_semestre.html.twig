<turbo-frame id="tab-content">
    {% if semestre == null %}
        Semestre inexistant
    {% else %}
        <header class="border-b border-slate-100 flex justify-between items-center bg-slate-50 p-2">
            <div>
                <div class="flex items-baseline gap-3">
                    <h2 class="text-xl font-black text-slate-800 tracking-tight">
                        Semestre {{ semestreParcours.ordre }}</h2>
                    <span class="px-2 py-1 {% if semestreParcours.isOuvert == false %}bg-red-100 text-red-700{% else %}bg-green-100 text-green-700{% endif %} text-[10px] font-black rounded uppercase">{% if semestreParcours.isOuvert == false %}
                            <i class="fal fa-do-not-enter"></i> Non ouvert{% else %}Ouvert{% endif %}</span>
                </div>
                <p class="text-xs text-slate-400 font-bold uppercase mt-1">Total horaire
                    : {{ semestre.heuresEctsSemestre.sommeSemestreTotalPres }} heures</p>
                <div class="flex gap-4 mt-1">
                    <span class="text-xs font-bold text-green-600 flex items-center gap-1">● Conforme aux règles</span>
                    <span class="text-xs font-medium text-slate-400">Dernière modif : il y a 2h</span>
                </div>
            </div>
            <div class="flex gap-3">
                <div class="text-right">
                    <p class="text-[10px] font-black text-slate-400 uppercase tracking-widest">Total ECTS
                        S{{ semestreParcours.ordre }}</p>
                    <p class="text-2xl font-black text-green-600">{{ semestre.heuresEctsSemestre.sommeSemestreEcts }} /
                        30</p> {# todo: mettre rouge ou orange si pas 30 #}
                </div>
                <button class="p-2">
                    <i class="fal fa-cogs"></i>
                </button>
                {#            <button class="px-6 py-2 bg-indigo-600 text-white rounded-xl text-xs font-black shadow-lg"> #}
                {#                Enregistrer #}
                {#            </button> #}
            </div>
        </header>

        <div class="flex-1 overflow-y-auto pt-3 custom-scrollbar">
            {% if semestreParcours.semestre.nonDispense == true %}
                <!-- html -->
                <div
                        class="border-3 border-dashed border-orange-200 bg-orange-50 text-orange-700 p-4 rounded-sm flex items-center justify-between gap-4"
                        role="status" aria-live="polite" aria-atomic="true"
                >
                    <div class="flex items-center gap-4">
                        <!-- icône d'avertissement / état -->
                        <span class="p-3 bg-orange-100 text-orange-600 rounded-full flex items-center justify-center">
                          <!-- exclamation-triangle (accessible) -->
                          <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" viewBox="0 0 20 20"
                               fill="currentColor"
                               aria-hidden="true">
                            <path fill-rule="evenodd"
                                  d="M8.257 3.099c.765-1.36 2.72-1.36 3.486 0l6.518 11.597A1.75 1.75 0 0 1 17.518 17H2.482a1.75 1.75 0 0 1-1.743-2.304L8.257 3.1zM9 7a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0V7zm1 7a1.25 1.25 0 1 0 0 2.5A1.25 1.25 0 0 0 10 14z"
                                  clip-rule="evenodd"/>
                          </svg>
                          <span class="sr-only">Semestre non dispensé</span>
                        </span>

                        <div>
                            <p class="font-semibold text-sm">Semestre non dispensé</p>
                            <p class="text-xs text-orange-700/80">Aucun contenu pour ce semestre. Dispenser pour ouvrir
                                la
                                saisie.</p>
                        </div>
                    </div>

                    <div class="flex items-center gap-3">
                        <!-- formulaire POST pour action "dispenser" (Turbo enabled) -->
                        <form method="post" action="" data-turbo="true" class="m-0">
                            <input type="hidden" name="_token"
                                   value="{{ csrf_token('dispense' ~ semestreParcours.semestre.id) }}">
                            <button
                                    type="submit"
                                    class="px-3 py-2 bg-orange-600 text-white rounded-md font-semibold hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-orange-400"
                                    aria-label="Dispenser ce semestre"
                            >
                                Dispenser ce semestre
                            </button>
                        </form>
                    </div>
                </div>

            {% else %}
                <a
                        class="text-xs font-green text-green-700"
                        href="{{ path('parcours_structure_add_ue_semestre', {parcours:parcours.id, semestreParcours:semestre.semestreParcours.id}) }}"
                        data-turbo="true"
                        data-action="click->modalturbo#open"
                >
                    + Ajouter une UE
                </a>
                <div
                        data-controller="sortable"
                        data-sortable-type-value="ue"
                        data-sortable-url-value="{{ path('parcours_structure_api_semestre_reorder_ue', {id: semestreParcours.semestre.id}) }}"
                >
                    {% for ue in semestre.ues %}
                        {{ include('parcours_v2/tabs/_ue.html.twig', {ue:ue}) }}
                    {% endfor %}
                </div>
            {% endif %}

            <a
                    class="text-xs font-green text-green-700"
                    href="{{ path('parcours_structure_add_ue_semestre', {parcours:parcours.id, semestreParcours:semestre.semestreParcours.id}) }}"
                    data-turbo="true"
                    data-action="click->modalturbo#open"
            >
                + Ajouter une UE
            </a>
        </div>
    {% endif %}
</turbo-frame>
