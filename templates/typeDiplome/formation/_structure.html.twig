<div class="row">

    <div class="col-sm-12 text-end mb-2">
        <div class="btn-group">
            <button type="button" class="btn btn-sm btn-outline-info btn-icon btn-icon-end w-100 w-sm-auto mx-2 dropdown-toggle mb-1" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <i class="{{ iconDownload }}"></i>  Fiches EC/matières
            </button>
            <div class="dropdown-menu" style="">
                <a class="dropdown-item" href="{{ path('fiche_matiere_export_all', {parcours:parcours.id}) }}">
                    Version complète (toutes les fiches dans 1 pdf)
                </a>
                <a class="dropdown-item" href="{{ path('fiche_matiere_export_zip', {parcours:parcours.id}) }}">
                    Version zip (1 pdf par fiche)
                </a>
            </div>
        </div>

        {{ include('btn/export_mccc.html.twig') }}
    </div>
    <div class="col-sm-12">
        <table class="table table-striped table-hover">
            {% set presentiel = parcours.modalitesEnseignement != null and (parcours.modalitesEnseignement.value == 0 or parcours.modalitesEnseignement.value == 1) %}
            {% set distanciel = parcours.modalitesEnseignement != null and (parcours.modalitesEnseignement.value == 2 or parcours.modalitesEnseignement.value == 1) %}

            {% for semestreParc in parcours.semestreParcours %}
                {% if semestreParc.semestre.semestreRaccroche != null %}
                    {% set semestre = semestreParc.semestre.semestreRaccroche.semestre %}
                {% else %}
                    {% set semestre = semestreParc.semestre %}
                {% endif %}
                <tr>
                    <th colspan=" {% if presentiel %}8{% else %}13{% endif %}">{{ semestreParc.display }}</th>
                </tr>

                {% for ue in semestre.ues|filter(ue => ue.ueParent == null) %}
                   {{ include('typeDiplome/formation/_structureUe.html.twig') }}
                {% endfor %}
                <tr>
                    <th>&nbsp;</th>
                    <th colspan="2" class="text-end">Total Semestre</th>
                    <th>{{ dto.semestres[semestreParc.id].sommeSemestreEcts }}</th>

                    {% if presentiel %}
                        <th>{{ dto.semestres[semestreParc.id].sommeSemestreCmPres }}</th>
                        <th>{{ dto.semestres[semestreParc.id].sommeSemestreTdPres }}</th>
                        <th>{{ dto.semestres[semestreParc.id].sommeSemestreTpPres }}</th>
                        <th>{{ dto.semestres[semestreParc.id].sommeSemestreTotalPres }}</th>
                    {% endif %}

                    {% if distanciel %}
                        <th>{{ dto.semestres[semestreParc.id].sommeSemestreCmDist }}</th>
                        <th>{{ dto.semestres[semestreParc.id].sommeSemestreTdDist }}</th>
                        <th>{{ dto.semestres[semestreParc.id].sommeSemestreTpDist }}</th>
                        <th>{{ dto.semestres[semestreParc.id].sommeSemestreTotalDist }}</th>
                    {% endif %}

                    {% if parcours.modalitesEnseignement != null and (parcours.modalitesEnseignement.value == 1) %}
                        <th>{{ dto.semestres[semestreParc.id].sommeSemestreTotalPresDist }}</th>
                    {% endif %}
                </tr>
            {% endfor %}
            <tr>
                <th colspan="3" class="text-end">Total formation</th>
                <th>{{ dto.sommeFormationEcts }}</th>

                {% if presentiel %}
                    <th>{{ dto.sommeFormationCmPres }}</th>
                    <th>{{ dto.sommeFormationTdPres }}</th>
                    <th>{{ dto.sommeFormationTpPres }}</th>
                    <th>{{ dto.sommeFormationTotalPres }}</th>
                {% endif %}

                {% if distanciel %}
                    <th>{{ dto.sommeFormationCmDist }}</th>
                    <th>{{ dto.sommeFormationTdDist }}</th>
                    <th>{{ dto.sommeFormationTpDist }}</th>
                    <th>{{ dto.sommeFormationTotalDist }}</th>
                {% endif %}

                {% if parcours.modalitesEnseignement != null and (parcours.modalitesEnseignement.value == 1) %}
                    <th>{{ dto.sommeFormationTotalPresDist }}</th>
                {% endif %}
            </tr>
        </table>
    </div>
</div>
