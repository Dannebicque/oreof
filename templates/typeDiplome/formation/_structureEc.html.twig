<tr>
    <th>&nbsp;</th>
    <th>&nbsp;</th>
    <td>
        <strong>{{ ec.code }}</strong>
        {% if ec.ficheMatiere != null %}
            <a href="{{ path('app_fiche_matiere_show', {'id': ec.ficheMatiere.id}) }} }}">
                {{ ec.ficheMatiere.display }}
            </a>
        {% else %}
            {{ ec.libelle }}
        {% endif %}
    </td>
    <td>{{ ec.ects }}</td>

    {% if parcours.modalitesEnseignement != null and (parcours.modalitesEnseignement.value == 0 or parcours.modalitesEnseignement.value == 1) %}
        {% if ec.ecEnfants|length > 0 %}
            <td colspan="4"></td>
        {% else %}
            {% if ec.ecParent != null and ec.ecParent.heuresEnfantsIdentiques == true %}
                <td>{{ ec.ecParent.volumeCmPresentiel }}</td>
                <td>{{ ec.ecParent.volumeTdPresentiel }}</td>
                <td>{{ ec.ecParent.volumeTpPresentiel }}</td>
                <td>{{ ec.ecParent.volumeTotalPresentiel }}</td>

                {% set sommeCm = sommeCm + ec.ecParent.volumeCmPresentiel %}
                {% set sommeTd = sommeTd + ec.ecParent.volumeTdPresentiel %}
                {% set sommeTp = sommeTp + ec.ecParent.volumeTpPresentiel %}
                {% set sommeTotal = sommeTotal + ec.ecParent.volumeTotalPresentiel %}
            {% else %}
                <td>{{ ec.volumeCmPresentiel }}</td>
                <td>{{ ec.volumeTdPresentiel }}</td>
                <td>{{ ec.volumeTpPresentiel }}</td>
                <td>{{ ec.volumeTotalPresentiel }}</td>

                {% set sommeCm = sommeCm + ec.volumeCmPresentiel %}
                {% set sommeTd = sommeTd + ec.volumeTdPresentiel %}
                {% set sommeTp = sommeTp + ec.volumeTpPresentiel %}
                {% set sommeTotal = sommeTotal + ec.volumeTotalPresentiel %}
            {% endif %}
        {% endif %}
    {% endif %}

    {% if parcours.modalitesEnseignement != null and (parcours.modalitesEnseignement.value == 2 or parcours.modalitesEnseignement.value == 1) %}
        {% if ec.ecEnfants|length > 0 %}
            <td colspan="4"></td>
        {% else %}
            {% if ec.ecParent != null and ec.ecParent.heuresEnfantsIdentiques == true %}
                <td>{{ ec.ecParent.volumeCmDistanciel }}</td>
                <td>{{ ec.ecParent.volumeTdDistanciel }}</td>
                <td>{{ ec.ecParent.volumeTpDistanciel }}</td>
                <td>{{ ec.ecParent.volumeTotalDistanciel }}</td>
                {% set sommeCmDist = sommeCmDist + ec.ecParent.volumeCmDistanciel %}
                {% set sommeTdDist = sommeTdDist + ec.ecParent.volumeTdDistanciel %}
                {% set sommeTpDist = sommeTpDist + ec.ecParent.volumeTpDistanciel %}
                {% set sommeTotalDist = sommeTotalDist + ec.ecParent.volumeTotalDistanciel %}
            {% else %}
                <td>{{ ec.volumeCmDistanciel }}</td>
                <td>{{ ec.volumeTdDistanciel }}</td>
                <td>{{ ec.volumeTpDistanciel }}</td>
                <td>{{ ec.volumeTotalDistanciel }}</td>
                {% set sommeCmDist = sommeCmDist + ec.volumeCmDistanciel %}
                {% set sommeTdDist = sommeTdDist + ec.volumeTdDistanciel %}
                {% set sommeTpDist = sommeTpDist + ec.volumeTpDistanciel %}
                {% set sommeTotalDist = sommeTotalDist + ec.volumeTotalDistanciel %}
            {% endif %}
        {% endif %}

    {% endif %}

    {% if parcours.modalitesEnseignement != null and (parcours.modalitesEnseignement.value == 1) %}
        {% if ec.ecParent != null and ec.ecParent.heuresEnfantsIdentiques == true %}
            <td>{{ ec.ecParent.volumeTotalPresentiel + ec.ecParent.volumeTotalDistanciel }}</td>
        {% else %}
            <td>{{ ec.volumeTotalPresentiel + ec.volumeTotalDistanciel }}</td>
        {% endif %}
    {% endif %}
</tr>
{% set sommeEcts = sommeEcts + ec.ects %}



