<tr>
    <th>&nbsp;</th>
    {% if ue.ueRaccrochee != null %}
        {% set ue = ue.ueRaccrochee.ue %}
    {% endif %}
    <th colspan="3">{{ ue.display(parcours) }} | {{ ue.libelle }}</th>
    {% if presentiel %}
        {% if ue.ueEnfants|length == 0 %}
            <th colspan="{% if isBut %}5{% else %}4{% endif %}">Présentiel</th>
        {% else %}
            <th colspan="4"></th>
        {% endif %}
    {% endif %}
    {% if distanciel %}
        {% if ue.ueEnfants|length == 0 %}
            <th colspan="4">Distanciel</th>
        {% else %}
            <th colspan="4"></th>
        {% endif %}
    {% endif %}
    {% if parcours.modalitesEnseignement != null and (parcours.modalitesEnseignement.value == 1) %}
        <th>Total</th>
    {% endif %}
</tr>
{% if ue.ueEnfants|length == 0 %}
<tr>
    <th>&nbsp;</th>
    <th>&nbsp;</th>
    <th>Fiche EC/Matière</th>
    <th>ECTS</th>

    {% if presentiel %}
        <th>CM</th>
        <th>TD</th>
        <th>TP</th>
        {% if isBut %}
            <th>Autonom.</th>
        {% endif %}
        <th>Total Prés.</th>
    {% endif %}

    {% if distanciel %}
        <th>CM</th>
        <th>TD</th>
        <th>TP</th>
        <th>Total Dis.</th>
    {% endif %}

    {% if parcours.modalitesEnseignement != null and (parcours.modalitesEnseignement.value == 1) %}
        <th>Total</th>
    {% endif %}
</tr>
{% endif %}

{% for ec in ue.elementConstitutifs|filter(ec => ec.ecParent == null) %}
    {{ include('typeDiplome/formation/_structureEc.html.twig', {ec:ec}) }}
    {% for ece in ec.ecEnfants %}
        {{ include('typeDiplome/formation/_structureEc.html.twig', {ec:ece}) }}
    {% endfor %}
{% endfor %}

{% if ue.ueEnfants|length == 0 %}
<tr>
    <th>&nbsp;</th>
    <th>&nbsp;</th>
    <th class="text-end">Total</th>

    <th>{{ dto.semestres[semestreParc.id].ues[ue.id].sommeUeEcts }}</th>
    {% if presentiel %}
        <th>{{ dto.semestres[semestreParc.id].ues[ue.id].sommeUeCmPres|filtreHeures }}</th>
        <th>{{ dto.semestres[semestreParc.id].ues[ue.id].sommeUeTdPres|filtreHeures }}</th>
        <th>{{ dto.semestres[semestreParc.id].ues[ue.id].sommeUeTpPres|filtreHeures }}</th>
        {% if isBut %}
            <th>{{ dto.semestres[semestreParc.id].ues[ue.id].sommeUeTePres|filtreHeures }}</th>
        {% endif %}
        <th>{{ dto.semestres[semestreParc.id].ues[ue.id].sommeUeTotalPres|filtreHeures }}</th>
    {% endif %}

    {% if distanciel %}
        <th>{{ dto.semestres[semestreParc.id].ues[ue.id].sommeUeCmDist|filtreHeures }}</th>
        <th>{{ dto.semestres[semestreParc.id].ues[ue.id].sommeUeTdDist|filtreHeures }}</th>
        <th>{{ dto.semestres[semestreParc.id].ues[ue.id].sommeUeTpDist|filtreHeures }}</th>
        <th>{{ dto.semestres[semestreParc.id].ues[ue.id].sommeUeTotalDist|filtreHeures }}</th>
    {% endif %}

    {% if parcours.modalitesEnseignement != null and (parcours.modalitesEnseignement.value == 1) %}
        <th>{{ dto.semestres[semestreParc.id].ues[ue.id].sommeUeTotalPresDist|filtreHeures }}</th>
    {% endif %}
</tr>
{% endif %}
{% for ueE in ue.ueEnfants %}
    {% if dto.semestres[semestreParc.id].ues[ueE.id] is defined %}
        {{ include('typeDiplome/formation/_structureUe.html.twig', {ue:ueE}) }}
    {% endif %}
{% endfor %}
