<div>
    <table class="table {% if mode == 'detail' %} table-condensed{% endif %} table-hover ">
        <thead>
        <tr>
            <th>Libellé</th>
            <th>Matière</th>
            <th>Référent</th>
            <th>Remplissage</th>
            <th>Volumes Horaires</th>
            <th>MCCC</th>
            <th></th>
            <th></th>
            <th>Déplacer</th>
        </tr>
        </thead>
        <tbody>

        {% for ec in ecs|filter(ec => ec.ecParent == null) %}
            {% if ec.ecEnfants|length == 0 %}
                {# cas classique #}
                <tr {{ stimulus_controller('ec--liste') }}>
                    <td>{{ ec.code }}</td>
                    {% if ec.ficheMatiere != null %}
                        <td>{{ ec.display }}</td>
                        <td>{{ ec.ficheMatiere.responsableFicheMatiere != null ? ec.ficheMatiere
                            .responsableFicheMatiere.display : 'Non défini' }}</td>
                        <td>{{ ec.ficheMatiere.remplissage|remplissage }}</td>
                    {% else %}
                        <td colspan="3">{{ ec.texteEcLibre }} (EC Libre)</td>
                    {% endif %}
                    <td>
                        <button
                                {% if deplacer is defined and deplacer == true %}
                                    {{ stimulus_controller('modal', {
                                        size: 'lg',
                                        modalTitle: 'Volumes Horaires',
                                        nomEvenement: 'refreshListeEc' ,
                                        details: {ue: ue.id, parcours: parcours.id},
                                        modalUrl: path('app_element_constitutif_structure',{'id': ec.id}) }) }}
                                {% else %}
                                    {{ stimulus_controller('modal', {
                                        size: 'lg',
                                        modalTitle: 'Volumes Horaires',
                                        modalUrl: path('app_element_constitutif_structure',{'id': ec.id}) }) }}
                                {% endif %}
                                data-action="click->modal#openModal"
                                class="btn btn-sm btn-outline-info"
                                data-size="lg"
                                data-bs-toggle="tooltip"
                                data-bs-placement="bottom"
                                title="Volumes Horaires"
                        >
                            <i class="fal fa-clock"></i>
                            <span class="badge bg-{% if ec.etatStructure == 'Complet' %}success{% else %}warning{% endif %}">
                            {{ ec.etatStructure }}
                        </span>
                        </button>
                    </td>
                    <td>
                        <button
                                {% if deplacer is defined and deplacer == true %}

                                    {{ stimulus_controller('modal', {
                                        size: 'lg',
                                        nomEvenement: 'refreshListeEc',
                                        details: {ue: ue.id, parcours: parcours.id},
                                        modalTitle: 'Modalités de Contrôle des Connaissances et des Compétences',
                                        modalUrl: path('app_element_constitutif_mccc',{'id': ec.id}) }) }}
                                {% else %}
                                    {{ stimulus_controller('modal', {
                                        size: 'lg',
                                        modalTitle: 'Modalités de Contrôle des Connaissances et des Compétences',
                                        modalUrl: path('app_element_constitutif_mccc',{'id': ec.id}) }) }}
                                {% endif %}
                                data-action="click->modal#openModal"
                                class="btn btn-sm btn-outline-info"
                                data-size="lg"
                                data-bs-toggle="tooltip"
                                data-bs-placement="bottom"
                                title="Modalités de Contrôle des Connaissances et des Compétences"
                        >
                            <i class="fal fa-marker"></i>
                            <span class="badge bg-{% if ec.etatMccc == 'Complet' %}success{% else %}warning{% endif %}">
                            {{ ec.etatMccc }}
                        </span>
                        </button>
                    </td>
                    <td class="text-end">
                        {% if (is_granted('ROLE_FORMATION_EDIT_MY', parcours.formation) or is_granted
                            ('ROLE_EC_EDIT_MY', ec)) %}
                        {% if ec.ficheMatiere != null %}
                            <a
                                    href="{{ path('app_fiche_matiere_show',{'id': ec.ficheMatiere.id}) }}"
                                    class="btn btn-sm text-info"
                                    data-bs-toggle="tooltip"
                                    data-bs-placement="bottom"
                                    title="Voir la fiche EC/matière"
                                    target="_blank"
                            >
                                <i class="{{ iconShow }}"></i>
                                <span> Voir la fiche EC/matière</span>
                            </a>
                            <a
                                    href="{{ path('app_fiche_matiere_edit',{'id': ec.ficheMatiere.id}) }}"
                                    class="btn btn-sm text-warning"
                                    data-bs-toggle="tooltip"
                                    data-bs-placement="bottom"
                                    title="Modifier la fiche EC/matière"
                                    target="_blank"
                            >
                                <i class="{{ iconEdit }}"></i>
                                <span> Modifier la fiche EC/matière</span>
                            </a>
                        {% endif %}
                    </td>
                    <td>
                        {% endif %}

                        {% if ((is_granted('ROLE_FORMATION_EDIT_MY', parcours.formation) or (is_granted
                            ('ROLE_EC_EDIT_MY', ec)) )) %}
                            <button
                                    {% if deplacer is defined and deplacer == true %}

                                        {{ stimulus_controller('modal', {
                                            size: 'lg',
                                            nomEvenement: 'refreshListeEc',
                                            details: {ue: ue.id, parcours: parcours.id},
                                            modalTitle: 'Modifier un élément constitutif',
                                            modalUrl: path('app_element_constitutif_edit',{'id': ec.id, parcours:parcours.id}) }) }}
                                    {% else %}
                                        {{ stimulus_controller('modal', {
                                            size: 'lg',
                                            modalTitle: 'Modifier un élément constitutif',
                                            modalUrl: path('app_element_constitutif_edit',{'id': ec.id, parcours:parcours.id}) }) }}
                                    {% endif %}
                                    data-action="click->modal#openModal"
                                    class="btn btn-sm text-warning"
                                    data-size="lg"
                                    data-bs-toggle="tooltip"
                                    data-bs-placement="bottom"
                                    title="Modifier un élément constitutif"
                            >
                                <i class="{{ iconEdit }}"></i>
                                <span> Modifier l'EC</span>
                            </button>

                        {% endif %}
                        {% if is_granted('ROLE_FORMATION_EDIT_MY', parcours.formation) %}
                            <button {{ stimulus_action('ec--liste', 'delete', 'click', {
                                url:path('app_element_constitutif_delete',{'id': ec.id}),
                                csrf: csrf_token('delete' ~ ec.id),
                                ue: ue.id,
                                parcours: parcours.id
                            }) }} class="btn btn-sm text-danger">
                                <i class="{{ iconDelete }}"></i> Supprimer l'EC
                            </button>
                        {% endif %}
                    </td>
                    {% if deplacer == true %}
                    <td>
                        {% if (is_granted('ROLE_FORMATION_EDIT_MY', parcours.formation) or (is_granted
                            ('ROLE_EC_EDIT_MY', ec))) %}
                            {% if not loop.first %}
                                <button class="btn btn-sm btn-outline-info" {{ stimulus_action('ec--liste', 'deplacerEc',
                                    'click', {url: path('app_element_constitutif_deplacer',{sens: 'up', id:
                                        ec.id, ue:ue.id}), ue:ue.id, parcours:parcours.id}) }}>
                                    <i class="fal fa-circle-up"></i></button>
                            {% else %}
                                <button class="btn btn-sm btn-outline-info" disabled>
                                    <i class="fal fa-circle-up"></i>
                                </button>
                            {% endif %}
                            {% if not loop.last %}
                                <button class="btn btn-sm btn-outline-info" {{ stimulus_action('ec--liste', 'deplacerEc',
                                    'click', {url: path('app_element_constitutif_deplacer',{sens: 'down', id:
                                        ec.id, ue:ue.id}), ue:ue.id, parcours:parcours.id}) }}><i class="fal
                                                        fa-circle-down"></i></button>
                            {% else %}
                                <button class="btn btn-sm btn-outline-info" disabled>
                                    <i class="fal fa-circle-down"></i>
                                </button>
                            {% endif %}
                        {% endif %}
                        {% endif %}

                    </td>
                <tr>
                    <td colspan="11">
                        <div class="text-divider">
                            <button class="btn text-success btn-sm"
                                    {{ stimulus_controller('modal', {
                                        size: 'lg',
                                        modalTitle: 'Ajouter un élément constitutif',
                                        nomEvenement: 'refreshListeEc',
                                        details: {ue: ue.id, parcours: parcours.id},
                                        modalUrl: path('app_element_constitutif_new', {ue: ue.id, parcours:parcours.id, ec:ec
                                        .id})
                                    }) }}
                                    data-action="click->modal#openModal"
                            >
                                <i class="{{ iconAdd }}"></i>
                                Ajouter un EC avant l'<strong>{{ ec.code }}</strong>
                            </button>
                        </div>
                    </td>
                </tr>
            {% else %}
                {# cas EC avec enfants #}
                <tr {{ stimulus_controller('ec--liste') }} class="{% if ec.subOrdre != null and ec.subOrdre != 0 %}border-left-sousEc border-left-sousEc-{{ ec.ordre }}{% endif %}">
                    <td>{{ ec.code }}</td>
                    <td colspan="3">{{ ec.libelle }}</td>
                    <td>
                        <button
                                {% if deplacer is defined and deplacer == true %}
                                    {{ stimulus_controller('modal', {
                                        size: 'lg',
                                        modalTitle: 'Volumes Horaires',
                                        nomEvenement: 'refreshListeEc' ,
                                        details: {ue: ue.id, parcours: parcours.id},
                                        modalUrl: path('app_element_constitutif_structure',{'id': ec.id}) }) }}
                                {% else %}
                                    {{ stimulus_controller('modal', {
                                        size: 'lg',
                                        modalTitle: 'Volumes Horaires',
                                        modalUrl: path('app_element_constitutif_structure',{'id': ec.id}) }) }}
                                {% endif %}
                                data-action="click->modal#openModal"
                                class="btn btn-sm btn-outline-info"
                                data-size="lg"
                                data-bs-toggle="tooltip"
                                data-bs-placement="bottom"
                                title="Volumes Horaires"
                        >
                            <i class="fal fa-clock"></i>
                            <span class="badge bg-{% if ec.etatStructure == 'Complet' %}success{% else %}warning{% endif %}">
                            {{ ec.etatStructure }}
                        </span>
                        </button>
                    </td>
                    <td>
                        <button
                                {% if deplacer is defined and deplacer == true %}

                                    {{ stimulus_controller('modal', {
                                        size: 'lg',
                                        nomEvenement: 'refreshListeEc',
                                        details: {ue: ue.id, parcours: parcours.id},
                                        modalTitle: 'Modalités de Contrôle des Connaissances et des Compétences',
                                        modalUrl: path('app_element_constitutif_mccc',{'id': ec.id}) }) }}
                                {% else %}
                                    {{ stimulus_controller('modal', {
                                        size: 'lg',
                                        modalTitle: 'Modalités de Contrôle des Connaissances et des Compétences',
                                        modalUrl: path('app_element_constitutif_mccc',{'id': ec.id}) }) }}
                                {% endif %}
                                data-action="click->modal#openModal"
                                class="btn btn-sm btn-outline-info"
                                data-size="lg"
                                data-bs-toggle="tooltip"
                                data-bs-placement="bottom"
                                title="Modalités de Contrôle des Connaissances et des Compétences"
                        >
                            <i class="fal fa-marker"></i>
                            <span class="badge bg-{% if ec.etatMccc == 'Complet' %}success{% else %}warning{% endif %}">
                            {{ ec.etatMccc }}
                        </span>
                        </button>
                    </td>
                    <td class="text-end">
                        {#                    {% if (is_granted('ROLE_FORMATION_EDIT_MY', parcours.formation) or is_granted #}
                        {#                        ('ROLE_EC_EDIT_MY', ec)) and  (not workflow_can(ec, #}
                        {#                        'initialiser') ) %} #}
                        {#                        {% if ec.ficheMatiere != null %} #}
                        {#                            <a #}
                        {#                                    href="{{ path('app_fiche_matiere_show',{'id': ec.ficheMatiere.id}) }}" #}
                        {#                                    class="btn btn-sm text-info" #}
                        {#                                    data-bs-toggle="tooltip" #}
                        {#                                    data-bs-placement="bottom" #}
                        {#                                    title="Voir la fiche EC/matière" #}
                        {#                                    target="_blank" #}
                        {#                            > #}
                        {#                                <i class="{{ iconShow }}"></i> #}
                        {#                                <span> Voir la fiche EC/matière</span> #}
                        {#                            </a> #}
                        {#                            <a #}
                        {#                                    href="{{ path('app_fiche_matiere_edit',{'id': ec.ficheMatiere.id}) }}" #}
                        {#                                    class="btn btn-sm text-warning" #}
                        {#                                    data-bs-toggle="tooltip" #}
                        {#                                    data-bs-placement="bottom" #}
                        {#                                    title="Modifier la fiche EC/matière" #}
                        {#                                    target="_blank" #}
                        {#                            > #}
                        {#                                <i class="{{ iconShow }}"></i> #}
                        {#                                <span> Modifier la fiche EC/matière</span> #}
                        {#                            </a> #}
                        {#                        {% endif %} #}
                    </td>
                    <td>
                        {#                    {% endif %} #}


                        {#                    {% if ((is_granted('ROLE_FORMATION_EDIT_MY', parcours.formation) and  (workflow_can(ec, #}
                        {#                        'valider_ec') or workflow_can(ec, #}
                        {#                        'initialiser'))) or (is_granted #}
                        {#                        ('ROLE_EC_EDIT_MY', ec)) and  workflow_can(ec, #}
                        {#                        'valider_ec')) %} #}
                        <button
                                {% if deplacer is defined and deplacer == true %}

                                    {{ stimulus_controller('modal', {
                                        size: 'lg',
                                        nomEvenement: 'refreshListeEc',
                                        details: {ue: ue.id, parcours: parcours.id},
                                        modalTitle: 'Modifier un élément constitutif',
                                        modalUrl: path('app_element_constitutif_edit',{'id': ec.id, parcours:parcours.id}) }) }}
                                {% else %}
                                    {{ stimulus_controller('modal', {
                                        size: 'lg',
                                        modalTitle: 'Modifier un élément constitutif',
                                        modalUrl: path('app_element_constitutif_edit',{'id': ec.id, parcours:parcours.id}) }) }}
                                {% endif %}
                                data-action="click->modal#openModal"
                                class="btn btn-sm text-warning"
                                data-size="lg"
                                data-bs-toggle="tooltip"
                                data-bs-placement="bottom"
                                title="Modifier un élément constitutif"
                        >
                            <i class="{{ iconEdit }}"></i>
                            <span> modifier un EC</span>
                        </button>

                        {#                    {% endif %} #}
                        {#                    {% if is_granted('ROLE_FORMATION_EDIT_MY', parcours.formation) and workflow_can(ec, #}
                        {#                        'valider_ec') %} #}
                        <button {{ stimulus_action('ec--liste', 'delete', 'click', {
                            url:path('app_element_constitutif_delete',{'id': ec.id}),
                            csrf: csrf_token('delete' ~ ec.id),
                            ue: ue.id,
                            parcours: parcours.id
                        }) }} class="btn btn-sm text-danger">
                            <i class="{{ iconDelete }}"></i> Supprimer EC
                        </button>
                        {#                    {% endif %} #}
                    </td>
                    {% if deplacer == true %}
                        <td>
                            {#                        {% if ((is_granted('ROLE_FORMATION_EDIT_MY', parcours.formation) and  (workflow_can(ec, #}
                            {#                            'valider_ec') or workflow_can(ec, #}
                            {#                            'initialiser'))) or (is_granted #}
                            {#                            ('ROLE_EC_EDIT_MY', ec)) and  workflow_can(ec, #}
                            {#                            'valider_ec')) %} #}
                            {% if ec.subordre == 0 or ec.subordre == null %}
                                {% if not loop.first %}
                                    <button class="btn btn-sm btn-outline-info" {{ stimulus_action('ec--liste', 'deplacerEc',
                                        'click', {url: path('app_element_constitutif_deplacer',{sens: 'up', id:
                                            ec.id, ue:ue.id}), ue:ue.id, parcours:parcours.id}) }}>
                                        <i class="fal fa-circle-up"></i></button>
                                {% else %}
                                    <button class="btn btn-sm btn-outline-info" disabled>
                                        <i class="fal fa-circle-up"></i>
                                    </button>
                                {% endif %}
                                {% if not loop.last %}
                                    <button class="btn btn-sm btn-outline-info" {{ stimulus_action('ec--liste', 'deplacerEc',
                                        'click', {url: path('app_element_constitutif_deplacer',{sens: 'down', id:
                                            ec.id, ue:ue.id}), ue:ue.id, parcours:parcours.id}) }}><i class="fal
                                        fa-circle-down"></i></button>
                                {% else %}
                                    <button class="btn btn-sm btn-outline-info" disabled>
                                        <i class="fal fa-circle-down"></i>
                                    </button>
                                {% endif %}
                            {% else %}
                                {% if not loop.first %}
                                    <button class="btn btn-sm btn-outline-info" {{ stimulus_action('ec--liste', 'deplacerEc',
                                        'click', {url: path('app_element_constitutif_deplacer_subordre',{sens: 'up', id:
                                            ec.id, ue:ue.id}), ue:ue.id, parcours:parcours.id}) }}>
                                        <i class="fal fa-circle-up"></i></button>
                                {% else %}
                                    <button class="btn btn-sm btn-outline-info" disabled>
                                        <i class="fal fa-circle-up"></i>
                                    </button>
                                {% endif %}
                                {% if not loop.last %}
                                    <button class="btn btn-sm btn-outline-info" {{ stimulus_action('ec--liste', 'deplacerEc',
                                        'click', {url: path('app_element_constitutif_deplacer_subordre',{sens: 'down', id:
                                            ec.id, ue:ue.id}), ue:ue.id, parcours:parcours.id}) }}><i class="fal
                                        fa-circle-down"></i></button>
                                {% else %}
                                    <button class="btn btn-sm btn-outline-info" disabled>
                                        <i class="fal fa-circle-down"></i>
                                    </button>
                                {% endif %}
                            {% endif %}

                            {#                        {% endif %} #}

                        </td>
                    {% endif %}
                </tr>
                <tr>
                    <td colspan="11">
                        <div class="text-divider">
                            <button class="btn text-success btn-sm"
                                    {{ stimulus_controller('modal', {
                                        size: 'lg',
                                        modalTitle: 'Ajouter un élément constitutif',
                                        nomEvenement: 'refreshListeEc',
                                        details: {ue: ue.id, parcours: parcours.id},
                                        modalUrl: path('app_element_constitutif_new', {ue: ue.id, parcours:parcours.id, ec:ec
                                        .id})
                                    }) }}
                                    data-action="click->modal#openModal"
                            >
                                <i class="{{ iconAdd }}"></i>
                                Ajouter un EC avant l'<strong>{{ ec.ecEnfants[0].code }}</strong>
                            </button>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td colspan="11">
                        <table class="table border-left-sousEc border-left-sousEc-{{ ec.ordre }}">
                            {% for ece in ec.ecEnfants %}
                                {# Les EC enfants #}
                                <tr {{ stimulus_controller('ec--liste') }} >
                                    <td>{{ ece.code }}</td>
                                    <td>{{ ece.display }}</td>
                                    <td>{{ ece.ficheMatiere.responsableFicheMatiere != null ? ec.ficheMatiere
                                        .responsableFicheMatiere.display : 'Non défini' }}</td>
                                    <td>{{ ece.ficheMatiere.remplissage|remplissage }}</td>

                                    <td class="text-end">
                                        {#                    {% if (is_granted('ROLE_FORMATION_EDIT_MY', parcours.formation) or is_granted #}
                                        {#                        ('ROLE_EC_EDIT_MY', ec)) and  (not workflow_can(ec, #}
                                        {#                        'initialiser') ) %} #}
                                        {% if ece.ficheMatiere != null %}
                                            <a
                                                    href="{{ path('app_fiche_matiere_show',{'id': ece.ficheMatiere
                                                    .id}) }}"
                                                    class="btn btn-sm text-info"
                                                    data-bs-toggle="tooltip"
                                                    data-bs-placement="bottom"
                                                    title="Voir la fiche EC/matière"
                                                    target="_blank"
                                            >
                                                <i class="{{ iconShow }}"></i>
                                                <span> Voir la fiche EC/matière</span>
                                            </a>
                                            <a
                                                    href="{{ path('app_fiche_matiere_edit',{'id': ece.ficheMatiere
                                                    .id}) }}"
                                                    class="btn btn-sm text-warning"
                                                    data-bs-toggle="tooltip"
                                                    data-bs-placement="bottom"
                                                    title="Modifier la fiche EC/matière"
                                                    target="_blank"
                                            >
                                                <i class="{{ iconEdit }}"></i>
                                                <span> Modifier la fiche EC/matière</span>
                                            </a>
                                        {% endif %}
                                    </td>
                                    <td>
                                        {#                    {% endif %} #}


                                        {#                    {% if ((is_granted('ROLE_FORMATION_EDIT_MY', parcours.formation) and  (workflow_can(ec, #}
                                        {#                        'valider_ec') or workflow_can(ec, #}
                                        {#                        'initialiser'))) or (is_granted #}
                                        {#                        ('ROLE_EC_EDIT_MY', ec)) and  workflow_can(ec, #}
                                        {#                        'valider_ec')) %} #}
                                        <button
                                                {% if deplacer is defined and deplacer == true %}

                                                    {{ stimulus_controller('modal', {
                                                        size: 'lg',
                                                        nomEvenement: 'refreshListeEc',
                                                        details: {ue: ue.id, parcours: parcours.id},
                                                        modalTitle: 'Modifier un élément constitutif',
                                                        modalUrl: path('app_element_constitutif_edit',{'id': ece.id,
                                                            parcours:parcours.id}) }) }}
                                                {% else %}
                                                    {{ stimulus_controller('modal', {
                                                        size: 'lg',
                                                        modalTitle: 'Modifier un élément constitutif',
                                                        modalUrl: path('app_element_constitutif_edit',{'id': ece.id,
                                                            parcours:parcours.id}) }) }}
                                                {% endif %}
                                                data-action="click->modal#openModal"
                                                class="btn btn-sm text-warning"
                                                data-size="lg"
                                                data-bs-toggle="tooltip"
                                                data-bs-placement="bottom"
                                                title="Modifier un élément constitutif"
                                        >
                                            <i class="{{ iconEdit }}"></i>
                                            <span> modifier l'EC</span>
                                        </button>

                                        {#                    {% endif %} #}
                                        {#                    {% if is_granted('ROLE_FORMATION_EDIT_MY', parcours.formation) and workflow_can(ec, #}
                                        {#                        'valider_ec') %} #}
                                        <button {{ stimulus_action('ec--liste', 'delete', 'click', {
                                            url:path('app_element_constitutif_delete',{'id': ece.id}),
                                            csrf: csrf_token('delete' ~ ece.id),
                                            ue: ue.id,
                                            parcours: parcours.id
                                        }) }} class="btn btn-sm text-danger">
                                            <i class="{{ iconDelete }}"></i> Supprimer l'EC
                                        </button>
                                        {#                    {% endif %} #}
                                    </td>
                                    {% if deplacer == true %}
                                        <td>
                                            {#                        {% if ((is_granted('ROLE_FORMATION_EDIT_MY', parcours.formation) and  (workflow_can(ec, #}
                                            {#                            'valider_ec') or workflow_can(ec, #}
                                            {#                            'initialiser'))) or (is_granted #}
                                            {#                            ('ROLE_EC_EDIT_MY', ec)) and  workflow_can(ec, #}
                                            {#                            'valider_ec')) %} #}
                                            {% if not loop.first %}
                                                <button class="btn btn-sm btn-outline-info" {{ stimulus_action('ec--liste', 'deplacerEc',
                                                    'click', {url: path('app_element_constitutif_deplacer_subordre',{sens: 'up', id:
                                                        ece.id, ue:ue.id}), ue:ue.id, parcours:parcours.id}) }}>
                                                    <i class="fal fa-circle-up"></i></button>
                                            {% else %}
                                                <button class="btn btn-sm btn-outline-info" disabled>
                                                    <i class="fal fa-circle-up"></i>
                                                </button>
                                            {% endif %}
                                            {% if not loop.last %}
                                                <button class="btn btn-sm btn-outline-info" {{ stimulus_action('ec--liste', 'deplacerEc',
                                                    'click', {url: path('app_element_constitutif_deplacer_subordre',{sens: 'down', id:
                                                        ece.id, ue:ue.id}), ue:ue.id, parcours:parcours.id}) }}>
                                                    <i class="fal
                                        fa-circle-down"></i></button>
                                            {% else %}
                                                <button class="btn btn-sm btn-outline-info" disabled>
                                                    <i class="fal fa-circle-down"></i>
                                                </button>
                                            {% endif %}

                                            {#                        {% endif %} #}

                                        </td>
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td colspan="9">
                                        <div class="text-divider">
                                            <button class="btn text-success btn-sm"
                                                    {{ stimulus_controller('modal', {
                                                        size: 'lg',
                                                        modalTitle: 'Ajouter un élément constitutif',
                                                        nomEvenement: 'refreshListeEc',
                                                        details: {ue: ue.id, parcours: parcours.id},
                                                        modalUrl: path('app_element_constitutif_new', {ue: ue.id, parcours:parcours.id, ec:ec
                                                        .id})
                                                    }) }}
                                                    data-action="click->modal#openModal"
                                            >
                                                <i class="{{ iconAdd }}"></i>
                                                Ajouter un EC après l'<strong>{{ ece.code }}</strong>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                            {% endfor %}
                        </table>
                    </td>
                </tr>
                <tr>
                    <td colspan="11">
                        <div class="text-divider">
                            <button class="btn text-success btn-sm"
                                    {{ stimulus_controller('modal', {
                                        size: 'lg',
                                        modalTitle: 'Ajouter un élément constitutif',
                                        nomEvenement: 'refreshListeEc',
                                        details: {ue: ue.id, parcours: parcours.id},
                                        modalUrl: path('app_element_constitutif_new', {ue: ue.id, parcours:parcours.id, ec:ec
                                        .id})
                                    }) }}
                                    data-action="click->modal#openModal"
                            >
                                <i class="{{ iconAdd }}"></i>
                                Ajouter un EC après l'EC {{ ec.code }}
                            </button>
                        </div>
                    </td>
                </tr>
            {% endif %}
        {% else %}
            <tr>
                <td colspan="11" class="bg-warning">
                    Aucun EC
                </td>
            </tr>
            <tr>
                <td colspan="11">
                    <div class="text-divider">
                        <button class="btn text-success btn-sm"
                                {{ stimulus_controller('modal', {
                                    size: 'lg',
                                    modalTitle: 'Ajouter un élément constitutif',
                                    nomEvenement: 'refreshListeEc',
                                    details: {ue: ue.id, parcours: parcours.id},
                                    modalUrl: path('app_element_constitutif_new', {ue: ue.id, parcours:parcours.id})
                                }) }}
                                data-action="click->modal#openModal"
                        >
                            <i class="{{ iconAdd }}"></i>
                            Ajouter un EC
                        </button>
                    </div>
                </td>
            </tr>

        {% endfor %}
        <tr>
            <td colspan="11">
                <button
                        {{ stimulus_controller('modal', {
                            size: 'lg',
                            modalTitle: 'Ajouter une fiche EC/matière',
                            nomEvenement: 'refreshListeEc',
                            details: {ue: ue.id, parcours: parcours.id},
                            modalUrl: path('app_fiche_matiere_new', {ue: ue.id, parcours:parcours.id}) }) }}
                        data-action="click->modal#openModal"
                        class="btn btn-sm btn-outline-success btn-icon btn-icon-end w-100 w-sm-auto mx-2"
                        data-size="lg"
                        data-bs-toggle="tooltip"
                        data-bs-placement="bottom"
                        title="Ajouter une fiche EC/matière"
                >
                    <i class="{{ iconAdd }}"></i>
                    <span>Ajouter une fiche EC/matière</span>
                </button>
            </td>
        </tr>


        {#        {% if ec.ecEnfants %} #}
        {#            <tr {{ stimulus_controller('ec--liste') }} class="{% if ec.subOrdre != null and ec.subOrdre != 0 %}border-left-sousEc border-left-sousEc-{{ ec.ordre }}{% endif %}"> #}
        {#                <td>EC 1.3 #}{# ec.code #}{# </td> #}
        {#                <td colspan="3">EC à choix restreint (1 choix parmi les suivant)</td> #}
        {#                <td> #}
        {#                    <button #}
        {#                            {% if deplacer is defined and deplacer == true %} #}
        {#                                {{ stimulus_controller('modal', { #}
        {#                                    size: 'lg', #}
        {#                                    modalTitle: 'Volumes Horaires', #}
        {#                                    nomEvenement: 'refreshListeEc' , #}
        {#                                    details: {ue: ue.id, parcours: parcours.id}, #}
        {#                                    modalUrl: path('app_element_constitutif_structure',{'id': ec.id}) }) }} #}
        {#                            {% else %} #}
        {#                                {{ stimulus_controller('modal', { #}
        {#                                    size: 'lg', #}
        {#                                    modalTitle: 'Volumes Horaires', #}
        {#                                    modalUrl: path('app_element_constitutif_structure',{'id': ec.id}) }) }} #}
        {#                            {% endif %} #}
        {#                            data-action="click->modal#openModal" #}
        {#                            class="btn btn-sm btn-outline-info" #}
        {#                            data-size="lg" #}
        {#                            data-bs-toggle="tooltip" #}
        {#                            data-bs-placement="bottom" #}
        {#                            title="Volumes Horaires" #}
        {#                    > #}
        {#                        <i class="fal fa-clock"></i> #}
        {#                        <span class="badge bg-{% if ec.etatStructure == 'Complet' %}success{% else %}warning{% endif %}"> #}
        {#                            {{ ec.etatStructure }} #}
        {#                        </span> #}
        {#                    </button> #}
        {#                </td> #}
        {#                <td> #}
        {#                    <button #}
        {#                            {% if deplacer is defined and deplacer == true %} #}

        {#                                {{ stimulus_controller('modal', { #}
        {#                                    size: 'lg', #}
        {#                                    nomEvenement: 'refreshListeEc', #}
        {#                                    details: {ue: ue.id, parcours: parcours.id}, #}
        {#                                    modalTitle: 'Modalités de Contrôle des Connaissances et des Compétences', #}
        {#                                    modalUrl: path('app_element_constitutif_mccc',{'id': ec.id}) }) }} #}
        {#                            {% else %} #}
        {#                                {{ stimulus_controller('modal', { #}
        {#                                    size: 'lg', #}
        {#                                    modalTitle: 'Modalités de Contrôle des Connaissances et des Compétences', #}
        {#                                    modalUrl: path('app_element_constitutif_mccc',{'id': ec.id}) }) }} #}
        {#                            {% endif %} #}
        {#                            data-action="click->modal#openModal" #}
        {#                            class="btn btn-sm btn-outline-info" #}
        {#                            data-size="lg" #}
        {#                            data-bs-toggle="tooltip" #}
        {#                            data-bs-placement="bottom" #}
        {#                            title="Modalités de Contrôle des Connaissances et des Compétences" #}
        {#                    > #}
        {#                        <i class="fal fa-marker"></i> #}
        {#                        <span class="badge bg-{% if ec.etatMccc == 'Complet' %}success{% else %}warning{% endif %}"> #}
        {#                            {{ ec.etatMccc }} #}
        {#                        </span> #}
        {#                    </button> #}
        {#                </td> #}
        {#                <td class="text-end"> #}
        {#                    #}{#                    {% if (is_granted('ROLE_FORMATION_EDIT_MY', parcours.formation) or is_granted #}
        {#                    #}{#                        ('ROLE_EC_EDIT_MY', ec)) and  (not workflow_can(ec, #}
        {#                    #}{#                        'initialiser') ) %} #}
        {#                    #}{#                        {% if ec.ficheMatiere != null %} #}
        {#                    #}{#                            <a #}
        {#                    #}{#                                    href="{{ path('app_fiche_matiere_show',{'id': ec.ficheMatiere.id}) }}" #}
        {#                    #}{#                                    class="btn btn-sm text-info" #}
        {#                    #}{#                                    data-bs-toggle="tooltip" #}
        {#                    #}{#                                    data-bs-placement="bottom" #}
        {#                    #}{#                                    title="Voir la fiche EC/matière" #}
        {#                    #}{#                                    target="_blank" #}
        {#                    #}{#                            > #}
        {#                    #}{#                                <i class="{{ iconShow }}"></i> #}
        {#                    #}{#                                <span> Voir la fiche EC/matière</span> #}
        {#                    #}{#                            </a> #}
        {#                    #}{#                            <a #}
        {#                    #}{#                                    href="{{ path('app_fiche_matiere_edit',{'id': ec.ficheMatiere.id}) }}" #}
        {#                    #}{#                                    class="btn btn-sm text-warning" #}
        {#                    #}{#                                    data-bs-toggle="tooltip" #}
        {#                    #}{#                                    data-bs-placement="bottom" #}
        {#                    #}{#                                    title="Modifier la fiche EC/matière" #}
        {#                    #}{#                                    target="_blank" #}
        {#                    #}{#                            > #}
        {#                    #}{#                                <i class="{{ iconShow }}"></i> #}
        {#                    #}{#                                <span> Modifier la fiche EC/matière</span> #}
        {#                    #}{#                            </a> #}
        {#                    #}{#                        {% endif %} #}
        {#                </td> #}
        {#                <td> #}
        {#                    #}{#                    {% endif %} #}


        {#                    #}{#                    {% if ((is_granted('ROLE_FORMATION_EDIT_MY', parcours.formation) and  (workflow_can(ec, #}
        {#                    #}{#                        'valider_ec') or workflow_can(ec, #}
        {#                    #}{#                        'initialiser'))) or (is_granted #}
        {#                    #}{#                        ('ROLE_EC_EDIT_MY', ec)) and  workflow_can(ec, #}
        {#                    #}{#                        'valider_ec')) %} #}
        {#                    <button #}
        {#                            {% if deplacer is defined and deplacer == true %} #}

        {#                                {{ stimulus_controller('modal', { #}
        {#                                    size: 'lg', #}
        {#                                    nomEvenement: 'refreshListeEc', #}
        {#                                    details: {ue: ue.id, parcours: parcours.id}, #}
        {#                                    modalTitle: 'Modifier un élément constitutif', #}
        {#                                    modalUrl: path('app_element_constitutif_edit',{'id': ec.id, parcours:parcours.id}) }) }} #}
        {#                            {% else %} #}
        {#                                {{ stimulus_controller('modal', { #}
        {#                                    size: 'lg', #}
        {#                                    modalTitle: 'Modifier un élément constitutif', #}
        {#                                    modalUrl: path('app_element_constitutif_edit',{'id': ec.id, parcours:parcours.id}) }) }} #}
        {#                            {% endif %} #}
        {#                            data-action="click->modal#openModal" #}
        {#                            class="btn btn-sm text-warning" #}
        {#                            data-size="lg" #}
        {#                            data-bs-toggle="tooltip" #}
        {#                            data-bs-placement="bottom" #}
        {#                            title="Modifier un élément constitutif" #}
        {#                    > #}
        {#                        <i class="{{ iconEdit }}"></i> #}
        {#                        <span> modifier un EC</span> #}
        {#                    </button> #}

        {#                    #}{#                    {% endif %} #}
        {#                    #}{#                    {% if is_granted('ROLE_FORMATION_EDIT_MY', parcours.formation) and workflow_can(ec, #}
        {#                    #}{#                        'valider_ec') %} #}
        {#                    <button {{ stimulus_action('ec--liste', 'delete', 'click', { #}
        {#                        url:path('app_element_constitutif_delete',{'id': ec.id}), #}
        {#                        csrf: csrf_token('delete' ~ ec.id) #}
        {#                    }) }} class="btn btn-sm text-danger"> #}
        {#                        <i class="{{ iconDelete }}"></i> Supprimer EC #}
        {#                    </button> #}
        {#                    #}{#                    {% endif %} #}
        {#                </td> #}
        {#                {% if deplacer == true %} #}
        {#                    <td> #}
        {#                        #}{#                        {% if ((is_granted('ROLE_FORMATION_EDIT_MY', parcours.formation) and  (workflow_can(ec, #}
        {#                        #}{#                            'valider_ec') or workflow_can(ec, #}
        {#                        #}{#                            'initialiser'))) or (is_granted #}
        {#                        #}{#                            ('ROLE_EC_EDIT_MY', ec)) and  workflow_can(ec, #}
        {#                        #}{#                            'valider_ec')) %} #}
        {#                        {% if ec.subordre == 0 or ec.subordre == null %} #}
        {#                            {% if not loop.first %} #}
        {#                                <button class="btn btn-sm btn-outline-info" {{ stimulus_action('ec--liste', 'deplacerEc', #}
        {#                                    'click', {url: path('app_element_constitutif_deplacer',{sens: 'up', id: #}
        {#                                        ec.id, ue:ue.id}), ue:ue.id, parcours:parcours.id}) }}> #}
        {#                                    <i class="fal fa-circle-up"></i></button> #}
        {#                            {% else %} #}
        {#                                <button class="btn btn-sm btn-outline-info" disabled><i class="fal fa-circle-up"></i> #}
        {#                                </button> #}
        {#                            {% endif %} #}
        {#                            {% if not loop.last %} #}
        {#                                <button class="btn btn-sm btn-outline-info" {{ stimulus_action('ec--liste', 'deplacerEc', #}
        {#                                    'click', {url: path('app_element_constitutif_deplacer',{sens: 'down', id: #}
        {#                                        ec.id, ue:ue.id}), ue:ue.id, parcours:parcours.id}) }}><i class="fal #}
        {#                                        fa-circle-down"></i></button> #}
        {#                            {% else %} #}
        {#                                <button class="btn btn-sm btn-outline-info" disabled><i class="fal fa-circle-down"></i> #}
        {#                                </button> #}
        {#                            {% endif %} #}
        {#                        {% else %} #}
        {#                            {% if not ec.subOrdre == 0 %} #}
        {#                                <button class="btn btn-sm btn-outline-info" {{ stimulus_action('ec--liste', 'deplacerEc', #}
        {#                                    'click', {url: path('app_element_constitutif_deplacer_subordre',{sens: 'up', id: #}
        {#                                        ec.id, ue:ue.id}), ue:ue.id, parcours:parcours.id}) }}> #}
        {#                                    <i class="fal fa-circle-up"></i></button> #}
        {#                            {% else %} #}
        {#                                <button class="btn btn-sm btn-outline-info" disabled><i class="fal fa-circle-up"></i> #}
        {#                                </button> #}
        {#                            {% endif %} #}
        {#                            {% if not loop.last %} #}
        {#                                <button class="btn btn-sm btn-outline-info" {{ stimulus_action('ec--liste', 'deplacerEc', #}
        {#                                    'click', {url: path('app_element_constitutif_deplacer_subordre',{sens: 'down', id: #}
        {#                                        ec.id, ue:ue.id}), ue:ue.id, parcours:parcours.id}) }}><i class="fal #}
        {#                                        fa-circle-down"></i></button> #}
        {#                            {% else %} #}
        {#                                <button class="btn btn-sm btn-outline-info" disabled><i class="fal fa-circle-down"></i> #}
        {#                                </button> #}
        {#                            {% endif %} #}
        {#                        {% endif %} #}

        {#                        #}{#                        {% endif %} #}

        {#                    </td> #}
        {#                {% endif %} #}
        {#            </tr> #}
        {#            <tr> #}
        {#                <td colspan="11"> #}
        {#                    <div class="text-divider"> #}
        {#                        <button class="btn text-success btn-sm" #}
        {#                                {{ stimulus_controller('modal', { #}
        {#                                    size: 'lg', #}
        {#                                    modalTitle: 'Ajouter un élément constitutif', #}
        {#                                    nomEvenement: 'refreshListeEc', #}
        {#                                    details: {ue: ue.id, parcours: parcours.id}, #}
        {#                                    modalUrl: path('app_element_constitutif_new', {ue: ue.id, parcours:parcours.id, ec:ec #}
        {#                                    .id}) #}
        {#                                }) }} #}
        {#                                data-action="click->modal#openModal" #}
        {#                        > #}
        {#                            <i class="{{ iconAdd }}"></i> #}
        {#                            Ajouter un EC avant l'EC {{ ec.code }} #}
        {#                        </button> #}
        {#                    </div> #}
        {#                </td> #}
        {#            </tr> #}
        {#            <tr> #}
        {#                <td colspan="11"> #}
        {#                    <table class="table"> #}
        {#                        <tr {{ stimulus_controller('ec--liste') }} class="{% if ec.subOrdre != null and ec.subOrdre != 0 %}border-left-sousEc border-left-sousEc-{{ ec.ordre }}{% endif %}"> #}
        {#                            <td>{{ ec.code }}</td> #}
        {#                            {% if ec.ficheMatiere != null %} #}
        {#                                <td>{{ ec.display }}</td> #}
        {#                                <td>{{ ec.ficheMatiere.responsableFicheMatiere != null ? ec.ficheMatiere #}
        {#                                    .responsableFicheMatiere.display : 'Non défini' }}</td> #}
        {#                                <td>{{ ec.ficheMatiere.remplissage|remplissage }}</td> #}
        {#                            {% else %} #}
        {#                                <td colspan="3">{{ ec.texteEcLibre }} (EC Libre)</td> #}
        {#                            {% endif %} #}
        {#                            <td class="text-end"> #}
        {#                                #}{#                    {% if (is_granted('ROLE_FORMATION_EDIT_MY', parcours.formation) or is_granted #}
        {#                                #}{#                        ('ROLE_EC_EDIT_MY', ec)) and  (not workflow_can(ec, #}
        {#                                #}{#                        'initialiser') ) %} #}
        {#                                {% if ec.ficheMatiere != null %} #}
        {#                                    <a #}
        {#                                            href="{{ path('app_fiche_matiere_show',{'id': ec.ficheMatiere.id}) }}" #}
        {#                                            class="btn btn-sm text-info" #}
        {#                                            data-bs-toggle="tooltip" #}
        {#                                            data-bs-placement="bottom" #}
        {#                                            title="Voir la fiche EC/matière" #}
        {#                                            target="_blank" #}
        {#                                    > #}
        {#                                        <i class="{{ iconShow }}"></i> #}
        {#                                        <span> Voir la fiche EC/matière</span> #}
        {#                                    </a> #}
        {#                                    <a #}
        {#                                            href="{{ path('app_fiche_matiere_edit',{'id': ec.ficheMatiere.id}) }}" #}
        {#                                            class="btn btn-sm text-warning" #}
        {#                                            data-bs-toggle="tooltip" #}
        {#                                            data-bs-placement="bottom" #}
        {#                                            title="Modifier la fiche EC/matière" #}
        {#                                            target="_blank" #}
        {#                                    > #}
        {#                                        <i class="{{ iconShow }}"></i> #}
        {#                                        <span> Modifier la fiche EC/matière</span> #}
        {#                                    </a> #}
        {#                                {% endif %} #}
        {#                            </td> #}
        {#                            <td> #}
        {#                                #}{#                    {% endif %} #}


        {#                                #}{#                    {% if ((is_granted('ROLE_FORMATION_EDIT_MY', parcours.formation) and  (workflow_can(ec, #}
        {#                                #}{#                        'valider_ec') or workflow_can(ec, #}
        {#                                #}{#                        'initialiser'))) or (is_granted #}
        {#                                #}{#                        ('ROLE_EC_EDIT_MY', ec)) and  workflow_can(ec, #}
        {#                                #}{#                        'valider_ec')) %} #}
        {#                                <button #}
        {#                                        {% if deplacer is defined and deplacer == true %} #}

        {#                                            {{ stimulus_controller('modal', { #}
        {#                                                size: 'lg', #}
        {#                                                nomEvenement: 'refreshListeEc', #}
        {#                                                details: {ue: ue.id, parcours: parcours.id}, #}
        {#                                                modalTitle: 'Modifier un élément constitutif', #}
        {#                                                modalUrl: path('app_element_constitutif_edit',{'id': ec.id, parcours:parcours.id}) }) }} #}
        {#                                        {% else %} #}
        {#                                            {{ stimulus_controller('modal', { #}
        {#                                                size: 'lg', #}
        {#                                                modalTitle: 'Modifier un élément constitutif', #}
        {#                                                modalUrl: path('app_element_constitutif_edit',{'id': ec.id, parcours:parcours.id}) }) }} #}
        {#                                        {% endif %} #}
        {#                                        data-action="click->modal#openModal" #}
        {#                                        class="btn btn-sm text-warning" #}
        {#                                        data-size="lg" #}
        {#                                        data-bs-toggle="tooltip" #}
        {#                                        data-bs-placement="bottom" #}
        {#                                        title="Modifier un élément constitutif" #}
        {#                                > #}
        {#                                    <i class="{{ iconEdit }}"></i> #}
        {#                                    <span> modifier un EC</span> #}
        {#                                </button> #}

        {#                                #}{#                    {% endif %} #}
        {#                                #}{#                    {% if is_granted('ROLE_FORMATION_EDIT_MY', parcours.formation) and workflow_can(ec, #}
        {#                                #}{#                        'valider_ec') %} #}
        {#                                <button {{ stimulus_action('ec--liste', 'delete', 'click', { #}
        {#                                    url:path('app_element_constitutif_delete',{'id': ec.id}), #}
        {#                                    csrf: csrf_token('delete' ~ ec.id) #}
        {#                                }) }} class="btn btn-sm text-danger"> #}
        {#                                    <i class="{{ iconDelete }}"></i> Supprimer EC #}
        {#                                </button> #}
        {#                                #}{#                    {% endif %} #}
        {#                            </td> #}
        {#                            {% if deplacer == true %} #}
        {#                                <td> #}
        {#                                    #}{#                        {% if ((is_granted('ROLE_FORMATION_EDIT_MY', parcours.formation) and  (workflow_can(ec, #}
        {#                                    #}{#                            'valider_ec') or workflow_can(ec, #}
        {#                                    #}{#                            'initialiser'))) or (is_granted #}
        {#                                    #}{#                            ('ROLE_EC_EDIT_MY', ec)) and  workflow_can(ec, #}
        {#                                    #}{#                            'valider_ec')) %} #}
        {#                                    {% if ec.subordre == 0 or ec.subordre == null %} #}
        {#                                        {% if not loop.first %} #}
        {#                                            <button class="btn btn-sm btn-outline-info" {{ stimulus_action('ec--liste', 'deplacerEc', #}
        {#                                                'click', {url: path('app_element_constitutif_deplacer',{sens: 'up', id: #}
        {#                                                    ec.id, ue:ue.id}), ue:ue.id, parcours:parcours.id}) }}> #}
        {#                                                <i class="fal fa-circle-up"></i></button> #}
        {#                                        {% else %} #}
        {#                                            <button class="btn btn-sm btn-outline-info" disabled> #}
        {#                                                <i class="fal fa-circle-up"></i> #}
        {#                                            </button> #}
        {#                                        {% endif %} #}
        {#                                        {% if not loop.last %} #}
        {#                                            <button class="btn btn-sm btn-outline-info" {{ stimulus_action('ec--liste', 'deplacerEc', #}
        {#                                                'click', {url: path('app_element_constitutif_deplacer',{sens: 'down', id: #}
        {#                                                    ec.id, ue:ue.id}), ue:ue.id, parcours:parcours.id}) }}><i class="fal #}
        {#                                        fa-circle-down"></i></button> #}
        {#                                        {% else %} #}
        {#                                            <button class="btn btn-sm btn-outline-info" disabled> #}
        {#                                                <i class="fal fa-circle-down"></i> #}
        {#                                            </button> #}
        {#                                        {% endif %} #}
        {#                                    {% else %} #}
        {#                                        {% if not ec.subOrdre == 0 %} #}
        {#                                            <button class="btn btn-sm btn-outline-info" {{ stimulus_action('ec--liste', 'deplacerEc', #}
        {#                                                'click', {url: path('app_element_constitutif_deplacer_subordre',{sens: 'up', id: #}
        {#                                                    ec.id, ue:ue.id}), ue:ue.id, parcours:parcours.id}) }}> #}
        {#                                                <i class="fal fa-circle-up"></i></button> #}
        {#                                        {% else %} #}
        {#                                            <button class="btn btn-sm btn-outline-info" disabled> #}
        {#                                                <i class="fal fa-circle-up"></i> #}
        {#                                            </button> #}
        {#                                        {% endif %} #}
        {#                                        {% if not loop.last %} #}
        {#                                            <button class="btn btn-sm btn-outline-info" {{ stimulus_action('ec--liste', 'deplacerEc', #}
        {#                                                'click', {url: path('app_element_constitutif_deplacer_subordre',{sens: 'down', id: #}
        {#                                                    ec.id, ue:ue.id}), ue:ue.id, parcours:parcours.id}) }}><i class="fal #}
        {#                                        fa-circle-down"></i></button> #}
        {#                                        {% else %} #}
        {#                                            <button class="btn btn-sm btn-outline-info" disabled> #}
        {#                                                <i class="fal fa-circle-down"></i> #}
        {#                                            </button> #}
        {#                                        {% endif %} #}
        {#                                    {% endif %} #}

        {#                                    #}{#                        {% endif %} #}

        {#                                </td> #}
        {#                            {% endif %} #}
        {#                        </tr> #}
        {#                        <tr> #}
        {#                            <td colspan="9"> #}
        {#                                <div class="text-divider"> #}
        {#                                    <button class="btn text-success btn-sm" #}
        {#                                            {{ stimulus_controller('modal', { #}
        {#                                                size: 'lg', #}
        {#                                                modalTitle: 'Ajouter un élément constitutif', #}
        {#                                                nomEvenement: 'refreshListeEc', #}
        {#                                                details: {ue: ue.id, parcours: parcours.id}, #}
        {#                                                modalUrl: path('app_element_constitutif_new', {ue: ue.id, parcours:parcours.id, ec:ec #}
        {#                                                .id}) #}
        {#                                            }) }} #}
        {#                                            data-action="click->modal#openModal" #}
        {#                                    > #}
        {#                                        <i class="{{ iconAdd }}"></i> #}
        {#                                        Ajouter un EC après l'EC {{ ec.code }} #}
        {#                                    </button> #}
        {#                                </div> #}
        {#                            </td> #}
        {#                        </tr> #}
        {#                        <tr {{ stimulus_controller('ec--liste') }} class="{% if ec.subOrdre != null and ec.subOrdre != 0 %}border-left-sousEc border-left-sousEc-{{ ec.ordre }}{% endif %}"> #}
        {#                            <td>{{ ec.code }}</td> #}
        {#                            {% if ec.ficheMatiere != null %} #}
        {#                                <td>{{ ec.display }}</td> #}
        {#                                <td>{{ ec.ficheMatiere.responsableFicheMatiere != null ? ec.ficheMatiere #}
        {#                                    .responsableFicheMatiere.display : 'Non défini' }}</td> #}
        {#                                <td>{{ ec.ficheMatiere.remplissage|remplissage }}</td> #}
        {#                            {% else %} #}
        {#                                <td colspan="3">{{ ec.texteEcLibre }} (EC Libre)</td> #}
        {#                            {% endif %} #}
        {#                            <td class="text-end"> #}
        {#                                #}{#                    {% if (is_granted('ROLE_FORMATION_EDIT_MY', parcours.formation) or is_granted #}
        {#                                #}{#                        ('ROLE_EC_EDIT_MY', ec)) and  (not workflow_can(ec, #}
        {#                                #}{#                        'initialiser') ) %} #}
        {#                                {% if ec.ficheMatiere != null %} #}
        {#                                    <a #}
        {#                                            href="{{ path('app_fiche_matiere_show',{'id': ec.ficheMatiere.id}) }}" #}
        {#                                            class="btn btn-sm text-info" #}
        {#                                            data-bs-toggle="tooltip" #}
        {#                                            data-bs-placement="bottom" #}
        {#                                            title="Voir la fiche EC/matière" #}
        {#                                            target="_blank" #}
        {#                                    > #}
        {#                                        <i class="{{ iconShow }}"></i> #}
        {#                                        <span> Voir la fiche EC/matière</span> #}
        {#                                    </a> #}
        {#                                    <a #}
        {#                                            href="{{ path('app_fiche_matiere_edit',{'id': ec.ficheMatiere.id}) }}" #}
        {#                                            class="btn btn-sm text-warning" #}
        {#                                            data-bs-toggle="tooltip" #}
        {#                                            data-bs-placement="bottom" #}
        {#                                            title="Modifier la fiche EC/matière" #}
        {#                                            target="_blank" #}
        {#                                    > #}
        {#                                        <i class="{{ iconShow }}"></i> #}
        {#                                        <span> Modifier la fiche EC/matière</span> #}
        {#                                    </a> #}
        {#                                {% endif %} #}
        {#                            </td> #}
        {#                            <td> #}
        {#                                #}{#                    {% endif %} #}


        {#                                #}{#                    {% if ((is_granted('ROLE_FORMATION_EDIT_MY', parcours.formation) and  (workflow_can(ec, #}
        {#                                #}{#                        'valider_ec') or workflow_can(ec, #}
        {#                                #}{#                        'initialiser'))) or (is_granted #}
        {#                                #}{#                        ('ROLE_EC_EDIT_MY', ec)) and  workflow_can(ec, #}
        {#                                #}{#                        'valider_ec')) %} #}
        {#                                <button #}
        {#                                        {% if deplacer is defined and deplacer == true %} #}

        {#                                            {{ stimulus_controller('modal', { #}
        {#                                                size: 'lg', #}
        {#                                                nomEvenement: 'refreshListeEc', #}
        {#                                                details: {ue: ue.id, parcours: parcours.id}, #}
        {#                                                modalTitle: 'Modifier un élément constitutif', #}
        {#                                                modalUrl: path('app_element_constitutif_edit',{'id': ec.id, parcours:parcours.id}) }) }} #}
        {#                                        {% else %} #}
        {#                                            {{ stimulus_controller('modal', { #}
        {#                                                size: 'lg', #}
        {#                                                modalTitle: 'Modifier un élément constitutif', #}
        {#                                                modalUrl: path('app_element_constitutif_edit',{'id': ec.id, parcours:parcours.id}) }) }} #}
        {#                                        {% endif %} #}
        {#                                        data-action="click->modal#openModal" #}
        {#                                        class="btn btn-sm text-warning" #}
        {#                                        data-size="lg" #}
        {#                                        data-bs-toggle="tooltip" #}
        {#                                        data-bs-placement="bottom" #}
        {#                                        title="Modifier un élément constitutif" #}
        {#                                > #}
        {#                                    <i class="{{ iconEdit }}"></i> #}
        {#                                    <span> modifier un EC</span> #}
        {#                                </button> #}

        {#                                #}{#                    {% endif %} #}
        {#                                #}{#                    {% if is_granted('ROLE_FORMATION_EDIT_MY', parcours.formation) and workflow_can(ec, #}
        {#                                #}{#                        'valider_ec') %} #}
        {#                                <button {{ stimulus_action('ec--liste', 'delete', 'click', { #}
        {#                                    url:path('app_element_constitutif_delete',{'id': ec.id}), #}
        {#                                    csrf: csrf_token('delete' ~ ec.id) #}
        {#                                }) }} class="btn btn-sm text-danger"> #}
        {#                                    <i class="{{ iconDelete }}"></i> Supprimer EC #}
        {#                                </button> #}
        {#                                #}{#                    {% endif %} #}
        {#                            </td> #}
        {#                            {% if deplacer == true %} #}
        {#                                <td> #}
        {#                                    #}{#                        {% if ((is_granted('ROLE_FORMATION_EDIT_MY', parcours.formation) and  (workflow_can(ec, #}
        {#                                    #}{#                            'valider_ec') or workflow_can(ec, #}
        {#                                    #}{#                            'initialiser'))) or (is_granted #}
        {#                                    #}{#                            ('ROLE_EC_EDIT_MY', ec)) and  workflow_can(ec, #}
        {#                                    #}{#                            'valider_ec')) %} #}
        {#                                    {% if ec.subordre == 0 or ec.subordre == null %} #}
        {#                                        {% if not loop.first %} #}
        {#                                            <button class="btn btn-sm btn-outline-info" {{ stimulus_action('ec--liste', 'deplacerEc', #}
        {#                                                'click', {url: path('app_element_constitutif_deplacer',{sens: 'up', id: #}
        {#                                                    ec.id, ue:ue.id}), ue:ue.id, parcours:parcours.id}) }}> #}
        {#                                                <i class="fal fa-circle-up"></i></button> #}
        {#                                        {% else %} #}
        {#                                            <button class="btn btn-sm btn-outline-info" disabled> #}
        {#                                                <i class="fal fa-circle-up"></i> #}
        {#                                            </button> #}
        {#                                        {% endif %} #}
        {#                                        {% if not loop.last %} #}
        {#                                            <button class="btn btn-sm btn-outline-info" {{ stimulus_action('ec--liste', 'deplacerEc', #}
        {#                                                'click', {url: path('app_element_constitutif_deplacer',{sens: 'down', id: #}
        {#                                                    ec.id, ue:ue.id}), ue:ue.id, parcours:parcours.id}) }}><i class="fal #}
        {#                                        fa-circle-down"></i></button> #}
        {#                                        {% else %} #}
        {#                                            <button class="btn btn-sm btn-outline-info" disabled> #}
        {#                                                <i class="fal fa-circle-down"></i> #}
        {#                                            </button> #}
        {#                                        {% endif %} #}
        {#                                    {% else %} #}
        {#                                        {% if not ec.subOrdre == 0 %} #}
        {#                                            <button class="btn btn-sm btn-outline-info" {{ stimulus_action('ec--liste', 'deplacerEc', #}
        {#                                                'click', {url: path('app_element_constitutif_deplacer_subordre',{sens: 'up', id: #}
        {#                                                    ec.id, ue:ue.id}), ue:ue.id, parcours:parcours.id}) }}> #}
        {#                                                <i class="fal fa-circle-up"></i></button> #}
        {#                                        {% else %} #}
        {#                                            <button class="btn btn-sm btn-outline-info" disabled> #}
        {#                                                <i class="fal fa-circle-up"></i> #}
        {#                                            </button> #}
        {#                                        {% endif %} #}
        {#                                        {% if not loop.last %} #}
        {#                                            <button class="btn btn-sm btn-outline-info" {{ stimulus_action('ec--liste', 'deplacerEc', #}
        {#                                                'click', {url: path('app_element_constitutif_deplacer_subordre',{sens: 'down', id: #}
        {#                                                    ec.id, ue:ue.id}), ue:ue.id, parcours:parcours.id}) }}><i class="fal #}
        {#                                        fa-circle-down"></i></button> #}
        {#                                        {% else %} #}
        {#                                            <button class="btn btn-sm btn-outline-info" disabled> #}
        {#                                                <i class="fal fa-circle-down"></i> #}
        {#                                            </button> #}
        {#                                        {% endif %} #}
        {#                                    {% endif %} #}

        {#                                    #}{#                        {% endif %} #}

        {#                                </td> #}
        {#                            {% endif %} #}
        {#                        </tr> #}
        {#                        <tr> #}
        {#                            <td colspan="9"> #}
        {#                                <div class="text-divider"> #}
        {#                                    <button class="btn text-success btn-sm" #}
        {#                                            {{ stimulus_controller('modal', { #}
        {#                                                size: 'lg', #}
        {#                                                modalTitle: 'Ajouter un élément constitutif', #}
        {#                                                nomEvenement: 'refreshListeEc', #}
        {#                                                details: {ue: ue.id, parcours: parcours.id}, #}
        {#                                                modalUrl: path('app_element_constitutif_new', {ue: ue.id, parcours:parcours.id, ec:ec #}
        {#                                                .id}) #}
        {#                                            }) }} #}
        {#                                            data-action="click->modal#openModal" #}
        {#                                    > #}
        {#                                        <i class="{{ iconAdd }}"></i> #}
        {#                                        Ajouter un EC après l'EC {{ ec.code }} #}
        {#                                    </button> #}
        {#                                </div> #}
        {#                            </td> #}
        {#                        </tr> #}
        {#                    </table> #}
        {#                </td> #}
        {#            </tr> #}
        {#            <tr> #}
        {#                <td colspan="11"> #}
        {#                    <div class="text-divider"> #}
        {#                        <button class="btn text-success btn-sm" #}
        {#                                {{ stimulus_controller('modal', { #}
        {#                                    size: 'lg', #}
        {#                                    modalTitle: 'Ajouter un élément constitutif', #}
        {#                                    nomEvenement: 'refreshListeEc', #}
        {#                                    details: {ue: ue.id, parcours: parcours.id}, #}
        {#                                    modalUrl: path('app_element_constitutif_new', {ue: ue.id, parcours:parcours.id, ec:ec #}
        {#                                    .id}) #}
        {#                                }) }} #}
        {#                                data-action="click->modal#openModal" #}
        {#                        > #}
        {#                            <i class="{{ iconAdd }}"></i> #}
        {#                            Ajouter un EC après l'EC 1.3 #}
        {#                        </button> #}
        {#                    </div> #}
        {#                </td> #}
        {#            </tr> #}
        {#        {% else %} #}
        {#            <tr {{ stimulus_controller('ec--liste') }} class="{% if ec.subOrdre != null and ec.subOrdre != 0 %}border-left-sousEc border-left-sousEc-{{ ec.ordre }}{% endif %}"> #}
        {#                <td>{{ ec.code }}</td> #}
        {#                {% if ec.ficheMatiere != null %} #}
        {#                    <td>{{ ec.display }}</td> #}
        {#                    <td>{{ ec.ficheMatiere.responsableFicheMatiere != null ? ec.ficheMatiere #}
        {#                        .responsableFicheMatiere.display : 'Non défini' }}</td> #}
        {#                    <td>{{ ec.ficheMatiere.remplissage|remplissage }}</td> #}
        {#                {% else %} #}
        {#                    <td colspan="3">{{ ec.texteEcLibre }} (EC Libre)</td> #}
        {#                {% endif %} #}
        {#                <td> #}
        {#                    <button #}
        {#                            {% if deplacer is defined and deplacer == true %} #}
        {#                                {{ stimulus_controller('modal', { #}
        {#                                    size: 'lg', #}
        {#                                    modalTitle: 'Volumes Horaires', #}
        {#                                    nomEvenement: 'refreshListeEc' , #}
        {#                                    details: {ue: ue.id, parcours: parcours.id}, #}
        {#                                    modalUrl: path('app_element_constitutif_structure',{'id': ec.id}) }) }} #}
        {#                            {% else %} #}
        {#                                {{ stimulus_controller('modal', { #}
        {#                                    size: 'lg', #}
        {#                                    modalTitle: 'Volumes Horaires', #}
        {#                                    modalUrl: path('app_element_constitutif_structure',{'id': ec.id}) }) }} #}
        {#                            {% endif %} #}
        {#                            data-action="click->modal#openModal" #}
        {#                            class="btn btn-sm btn-outline-info" #}
        {#                            data-size="lg" #}
        {#                            data-bs-toggle="tooltip" #}
        {#                            data-bs-placement="bottom" #}
        {#                            title="Volumes Horaires" #}
        {#                    > #}
        {#                        <i class="fal fa-clock"></i> #}
        {#                        <span class="badge bg-{% if ec.etatStructure == 'Complet' %}success{% else %}warning{% endif %}"> #}
        {#                            {{ ec.etatStructure }} #}
        {#                        </span> #}
        {#                    </button> #}
        {#                </td> #}
        {#                <td> #}
        {#                    <button #}
        {#                            {% if deplacer is defined and deplacer == true %} #}

        {#                                {{ stimulus_controller('modal', { #}
        {#                                    size: 'lg', #}
        {#                                    nomEvenement: 'refreshListeEc', #}
        {#                                    details: {ue: ue.id, parcours: parcours.id}, #}
        {#                                    modalTitle: 'Modalités de Contrôle des Connaissances et des Compétences', #}
        {#                                    modalUrl: path('app_element_constitutif_mccc',{'id': ec.id}) }) }} #}
        {#                            {% else %} #}
        {#                                {{ stimulus_controller('modal', { #}
        {#                                    size: 'lg', #}
        {#                                    modalTitle: 'Modalités de Contrôle des Connaissances et des Compétences', #}
        {#                                    modalUrl: path('app_element_constitutif_mccc',{'id': ec.id}) }) }} #}
        {#                            {% endif %} #}
        {#                            data-action="click->modal#openModal" #}
        {#                            class="btn btn-sm btn-outline-info" #}
        {#                            data-size="lg" #}
        {#                            data-bs-toggle="tooltip" #}
        {#                            data-bs-placement="bottom" #}
        {#                            title="Modalités de Contrôle des Connaissances et des Compétences" #}
        {#                    > #}
        {#                        <i class="fal fa-marker"></i> #}
        {#                        <span class="badge bg-{% if ec.etatMccc == 'Complet' %}success{% else %}warning{% endif %}"> #}
        {#                            {{ ec.etatMccc }} #}
        {#                        </span> #}
        {#                    </button> #}
        {#                </td> #}
        {#                <td class="text-end"> #}
        {#                    #}{#                    {% if (is_granted('ROLE_FORMATION_EDIT_MY', parcours.formation) or is_granted #}
        {#                    #}{#                        ('ROLE_EC_EDIT_MY', ec)) and  (not workflow_can(ec, #}
        {#                    #}{#                        'initialiser') ) %} #}
        {#                    {% if ec.ficheMatiere != null %} #}
        {#                        <a #}
        {#                                href="{{ path('app_fiche_matiere_show',{'id': ec.ficheMatiere.id}) }}" #}
        {#                                class="btn btn-sm text-info" #}
        {#                                data-bs-toggle="tooltip" #}
        {#                                data-bs-placement="bottom" #}
        {#                                title="Voir la fiche EC/matière" #}
        {#                                target="_blank" #}
        {#                        > #}
        {#                            <i class="{{ iconShow }}"></i> #}
        {#                            <span> Voir la fiche EC/matière</span> #}
        {#                        </a> #}
        {#                        <a #}
        {#                                href="{{ path('app_fiche_matiere_edit',{'id': ec.ficheMatiere.id}) }}" #}
        {#                                class="btn btn-sm text-warning" #}
        {#                                data-bs-toggle="tooltip" #}
        {#                                data-bs-placement="bottom" #}
        {#                                title="Modifier la fiche EC/matière" #}
        {#                                target="_blank" #}
        {#                        > #}
        {#                            <i class="{{ iconShow }}"></i> #}
        {#                            <span> Modifier la fiche EC/matière</span> #}
        {#                        </a> #}
        {#                    {% endif %} #}
        {#                </td> #}
        {#                <td> #}
        {#                    #}{#                    {% endif %} #}


        {#                    #}{#                    {% if ((is_granted('ROLE_FORMATION_EDIT_MY', parcours.formation) and  (workflow_can(ec, #}
        {#                    #}{#                        'valider_ec') or workflow_can(ec, #}
        {#                    #}{#                        'initialiser'))) or (is_granted #}
        {#                    #}{#                        ('ROLE_EC_EDIT_MY', ec)) and  workflow_can(ec, #}
        {#                    #}{#                        'valider_ec')) %} #}
        {#                    <button #}
        {#                            {% if deplacer is defined and deplacer == true %} #}

        {#                                {{ stimulus_controller('modal', { #}
        {#                                    size: 'lg', #}
        {#                                    nomEvenement: 'refreshListeEc', #}
        {#                                    details: {ue: ue.id, parcours: parcours.id}, #}
        {#                                    modalTitle: 'Modifier un élément constitutif', #}
        {#                                    modalUrl: path('app_element_constitutif_edit',{'id': ec.id, parcours:parcours.id}) }) }} #}
        {#                            {% else %} #}
        {#                                {{ stimulus_controller('modal', { #}
        {#                                    size: 'lg', #}
        {#                                    modalTitle: 'Modifier un élément constitutif', #}
        {#                                    modalUrl: path('app_element_constitutif_edit',{'id': ec.id, parcours:parcours.id}) }) }} #}
        {#                            {% endif %} #}
        {#                            data-action="click->modal#openModal" #}
        {#                            class="btn btn-sm text-warning" #}
        {#                            data-size="lg" #}
        {#                            data-bs-toggle="tooltip" #}
        {#                            data-bs-placement="bottom" #}
        {#                            title="Modifier un élément constitutif" #}
        {#                    > #}
        {#                        <i class="{{ iconEdit }}"></i> #}
        {#                        <span> modifier un EC</span> #}
        {#                    </button> #}

        {#                    #}{#                    {% endif %} #}
        {#                    #}{#                    {% if is_granted('ROLE_FORMATION_EDIT_MY', parcours.formation) and workflow_can(ec, #}
        {#                    #}{#                        'valider_ec') %} #}
        {#                    <button {{ stimulus_action('ec--liste', 'delete', 'click', { #}
        {#                        url:path('app_element_constitutif_delete',{'id': ec.id}), #}
        {#                        csrf: csrf_token('delete' ~ ec.id) #}
        {#                    }) }} class="btn btn-sm text-danger"> #}
        {#                        <i class="{{ iconDelete }}"></i> Supprimer EC #}
        {#                    </button> #}
        {#                    #}{#                    {% endif %} #}
        {#                </td> #}
        {#                {% if deplacer == true %} #}
        {#                    <td> #}
        {#                        #}{#                        {% if ((is_granted('ROLE_FORMATION_EDIT_MY', parcours.formation) and  (workflow_can(ec, #}
        {#                        #}{#                            'valider_ec') or workflow_can(ec, #}
        {#                        #}{#                            'initialiser'))) or (is_granted #}
        {#                        #}{#                            ('ROLE_EC_EDIT_MY', ec)) and  workflow_can(ec, #}
        {#                        #}{#                            'valider_ec')) %} #}
        {#                        {% if ec.subordre == 0 or ec.subordre == null %} #}
        {#                            {% if not loop.first %} #}
        {#                                <button class="btn btn-sm btn-outline-info" {{ stimulus_action('ec--liste', 'deplacerEc', #}
        {#                                    'click', {url: path('app_element_constitutif_deplacer',{sens: 'up', id: #}
        {#                                        ec.id, ue:ue.id}), ue:ue.id, parcours:parcours.id}) }}> #}
        {#                                    <i class="fal fa-circle-up"></i></button> #}
        {#                            {% else %} #}
        {#                                <button class="btn btn-sm btn-outline-info" disabled><i class="fal fa-circle-up"></i> #}
        {#                                </button> #}
        {#                            {% endif %} #}
        {#                            {% if not loop.last %} #}
        {#                                <button class="btn btn-sm btn-outline-info" {{ stimulus_action('ec--liste', 'deplacerEc', #}
        {#                                    'click', {url: path('app_element_constitutif_deplacer',{sens: 'down', id: #}
        {#                                        ec.id, ue:ue.id}), ue:ue.id, parcours:parcours.id}) }}><i class="fal #}
        {#                                        fa-circle-down"></i></button> #}
        {#                            {% else %} #}
        {#                                <button class="btn btn-sm btn-outline-info" disabled><i class="fal fa-circle-down"></i> #}
        {#                                </button> #}
        {#                            {% endif %} #}
        {#                        {% else %} #}
        {#                            {% if not ec.subOrdre == 0 %} #}
        {#                                <button class="btn btn-sm btn-outline-info" {{ stimulus_action('ec--liste', 'deplacerEc', #}
        {#                                    'click', {url: path('app_element_constitutif_deplacer_subordre',{sens: 'up', id: #}
        {#                                        ec.id, ue:ue.id}), ue:ue.id, parcours:parcours.id}) }}> #}
        {#                                    <i class="fal fa-circle-up"></i></button> #}
        {#                            {% else %} #}
        {#                                <button class="btn btn-sm btn-outline-info" disabled><i class="fal fa-circle-up"></i> #}
        {#                                </button> #}
        {#                            {% endif %} #}
        {#                            {% if not loop.last %} #}
        {#                                <button class="btn btn-sm btn-outline-info" {{ stimulus_action('ec--liste', 'deplacerEc', #}
        {#                                    'click', {url: path('app_element_constitutif_deplacer_subordre',{sens: 'down', id: #}
        {#                                        ec.id, ue:ue.id}), ue:ue.id, parcours:parcours.id}) }}><i class="fal #}
        {#                                        fa-circle-down"></i></button> #}
        {#                            {% else %} #}
        {#                                <button class="btn btn-sm btn-outline-info" disabled><i class="fal fa-circle-down"></i> #}
        {#                                </button> #}
        {#                            {% endif %} #}
        {#                        {% endif %} #}

        {#                        #}{#                        {% endif %} #}

        {#                    </td> #}
        {#                {% endif %} #}
        {#            </tr> #}
        {#            <tr> #}
        {#                <td colspan="11"> #}
        {#                    <div class="text-divider"> #}
        {#                        <button class="btn text-success btn-sm" #}
        {#                                {{ stimulus_controller('modal', { #}
        {#                                    size: 'lg', #}
        {#                                    modalTitle: 'Ajouter un élément constitutif', #}
        {#                                    nomEvenement: 'refreshListeEc', #}
        {#                                    details: {ue: ue.id, parcours: parcours.id}, #}
        {#                                    modalUrl: path('app_element_constitutif_new', {ue: ue.id, parcours:parcours.id, ec:ec #}
        {#                                    .id}) #}
        {#                                }) }} #}
        {#                                data-action="click->modal#openModal" #}
        {#                        > #}
        {#                            <i class="{{ iconAdd }}"></i> #}
        {#                            Ajouter un EC après l'EC {{ ec.code }} #}
        {#                        </button> #}
        {#                    </div> #}
        {#                </td> #}
        {#            </tr> #}
        {#        {% endif %} #}
        {#        {% else %} #}
        {#            <tr> #}
        {#                <td colspan="11" class="bg-warning"> #}
        {#                    Aucun EC #}
        {#                </td> #}
        {#            </tr> #}
        {#            <tr> #}
        {#                <td colspan="11"> #}
        {#                    <div class="text-divider"> #}
        {#                        <button class="btn text-success btn-sm" #}
        {#                                {{ stimulus_controller('modal', { #}
        {#                                    size: 'lg', #}
        {#                                    modalTitle: 'Ajouter un élément constitutif', #}
        {#                                    nomEvenement: 'refreshListeEc', #}
        {#                                    details: {ue: ue.id, parcours: parcours.id}, #}
        {#                                    modalUrl: path('app_element_constitutif_new', {ue: ue.id, parcours:parcours.id}) #}
        {#                                }) }} #}
        {#                                data-action="click->modal#openModal" #}
        {#                        > #}
        {#                            <i class="{{ iconAdd }}"></i> #}
        {#                            Ajouter un EC #}
        {#                        </button> #}
        {#                    </div> #}
        {#                </td> #}
        {#            </tr> #}
        {#        {% endfor %} #}
        {#        #}{#        {% if parcours is defined and is_granted('ROLE_EC_ADD_MY', parcours.formation) and ue is defined %} #}
        {#        <tr> #}
        {#            <td colspan="11"> #}
        {#                <button #}
        {#                        {{ stimulus_controller('modal', { #}
        {#                            size: 'lg', #}
        {#                            modalTitle: 'Ajouter une fiche EC/matière', #}
        {#                            nomEvenement: 'refreshListeEc', #}
        {#                            details: {ue: ue.id, parcours: parcours.id}, #}
        {#                            modalUrl: path('app_fiche_matiere_new', {ue: ue.id, parcours:parcours.id}) }) }} #}
        {#                        data-action="click->modal#openModal" #}
        {#                        class="btn btn-sm btn-outline-success btn-icon btn-icon-end w-100 w-sm-auto mx-2" #}
        {#                        data-size="lg" #}
        {#                        data-bs-toggle="tooltip" #}
        {#                        data-bs-placement="bottom" #}
        {#                        title="Ajouter une fiche EC/matière" #}
        {#                > #}
        {#                    <i class="{{ iconAdd }}"></i> #}
        {#                    <span>Ajouter une fiche EC/matière</span> #}
        {#                </button> #}
        {#            </td> #}
        {#        </tr> #}
        {#        #}{#        {% endif %} #}
        </tbody>
    </table>
</div>
