{% set formation = parcours.formation %}

{% if is_granted('ROLE_ADMIN') %}
        {{ component('mention_manage', {parcours:parcours, type:'parcours'}) }}
{% endif %}

<div class="card">
    <div class="card-body">
        <div class="row">
            <div class="col-3">
                <dl>
                    <dt>Domaine</dt>
                    <dd>{{ formation.domaine ? formation.domaine.libelle : 'Non défini' }}</dd>
                    <dt>Type de formation</dt>
                    <dd>{{ formation.typeDiplome|typeDiplome }}</dd>
                </dl>
            </div>
            <div class="col-3">
                <dl>
                    <dt>Composante</dt>
                    <dd>{{ formation.composantePorteuse != null ? formation.composantePorteuse.libelle : 'Non définie' }}</dd>
                    <dt>Mention/spécialité</dt>
                    <dd>{{ formation.display }}</dd>
                </dl>
            </div>
            <div class="col-3">
                <dl>
                    <dt>Responsable de la mention/spécialité</dt>
                    <dd>{{ formation.responsableMention != null ? formation.responsableMention.display : 'Non défini' }}</dd>
                    <dt>Responsable du parcours</dt>
                    <dd>
                        {{ parcours.respParcours != null ? parcours.respParcours.display : 'Non défini' }}
                        {% if parcours.coResponsable != null %}
                        <i class="fal fa-users" data-bs-toggle="tooltip" data-bs-placement="bottom"
                           title="Co-responsable : {{ parcours.coResponsable.display }}"></i>
                        {% endif %}
                    </dd>
                </dl>
            </div>
            <div class="col-3 d-grid">
                <a class="btn btn-outline-primary d-block" href="{{ path('app_parcours_bcc', {parcours:parcours.id}) }}">
                    <i class="fas fa-check"></i>
                    Contrôler les BCC
                </a>
                <a class="btn btn-outline-primary d-block mt-1" href="{{ path('app_parcours_mccc_export', {parcours:parcours.id, _format:'xlsx'}) }}">
                    <i class="{{ iconDownload }}"></i>
                    Export MCCC (xlsx)
                </a>
                <a class="btn btn-outline-primary d-block mt-1" href="{{ path('app_parcours_mccc_export_light', {parcours:parcours.id, _format:'xlsx'}) }}">
                    <i class="{{ iconDownload }}"></i>
                    Export simplifié des MCCC (xlsx)
                </a>
{#                {{ include('btn/export_mccc.html.twig', {block:true}) }}
todo: résoudre le soucis du block sur btn dropdown #}

                <button
                        {{ stimulus_controller('modal', {
                            size: 'lg',
                            modalTitle: 'Vérifier la saisie',
                            modalUrl: path('app_parcours_state', {parcours:parcours.id}) }) }}
                        data-action="click->modal#openModal"
                        class="btn btn-outline-success d-block mt-1"
                        data-size="lg"
                        data-bs-toggle="tooltip"
                        data-bs-placement="bottom"
                        title="Vérifier la saisie"
                >
                    <i class="fas fa-check"></i>
                    <span> Vérifier la saisie</span>
                </button>

            </div>
        </div>
    </div>
</div>
